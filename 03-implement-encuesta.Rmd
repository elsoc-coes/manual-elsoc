```{r}
library(tidyverse)
library(kableExtra)
load(file = file.path('inputs', 'ELSOC_Long.RData'))

```

# Implementation of the Survey {#implem_encuest}

## General characteristics of the survey

### Executing entity {-}

Given the quality and transparency standards of ELSOC, the implementation of ELSOC is carried out by an independent institution, awarded through a public tender. To date, 3 public tenders have been held: in 2016, 2018, and 2020, each covering 2 measurements of the study. That is, the 2016 and 2017 waves (Original Sample), 2018 and 2019 waves (Original and Refresh Samples), and 2021 and 2022 waves (Original and Refresh Samples), respectively.

The [Centro Micro Datos (CMD)](https://www.microdatos.cl) of the Faculty of Economics and Business of the University of Chile has been awarded the 3 tenders, so it has been in charge of the development of the survey since its inception. The tender bases and, therefore, the agreement with Micro Datos, contemplate the highest quality standards and ensure adequate protection of the personal contact data of the panel study participants.

Below are some of the criteria and practices applied to ensure the quality of data collection and processing:

### Questionnaire Piloting {-}

Each ELSOC questionnaire is piloted following the ELSOC survey modality, with the aim of testing the instrument and evaluating the operational functioning of the survey.

The piloting is carried out in the months prior to the official survey, followed by a round of focus groups with the interviewers to obtain relevant recommendations for the final survey. The information obtained is used to introduce changes to the questionnaires and to define adjustments to the interviewer training program.

For the piloting process, a random sample is used in the Metropolitan Region, obtained from the census conducted by CMD for the original sample.

### Field Planning and Execution {-}

The selection and training of site coordinators, interviewers, and supervisors is a fundamental pillar of the survey. Therefore, it is essential that both the coordinators and the interviewers fully understand the survey and its objective, so that they are able to argue the importance and functionality of the information they are collecting.

To this end, the first step is the selection of Site Coordinators, who are responsible for leading the team of interviewers in each administrative area (sites). People with experience in this role in previous waves of the project and/or with experience in complex surveys are selected.

In the case of interviewers, interviewers who participated in previous waves of the project and whose work evaluation was satisfactory are invited. Interviewers who had participated in the latest survey projects conducted by CMD were also invited.

For each survey process, training is provided to interviewers and supervisors on aspects of the study (objectives, coverage, types of respondents, etc.), methodological aspects in the application format, and the questionnaire.

Additionally, an Interviewer Manual was developed and used for the implementation of ELSOC, as well as guiding documents and protocols for the application of the questionnaire. This includes:

- Visit Protocol: first contact with the household, first contact with the household, and scheduling of interviews in cases where the interview cannot be conducted at the time of the visit.

- Protocol for Difficult Cases: scenarios of refusals, scenarios of more than 4 in-person attempts without contact, access barriers to the household, no contact with the household. It also includes recovery strategies.

- Questionnaire Application Protocol: study description, informed consent, question application, handling interruptions, delivery of gift cards.

- Field Protocol: information backup, progress control, contact registration.

The documents were adapted to meet the requirements of tracking a previously interviewed sample.

### Fieldwork Quality Control and Assurance {-}

From the beginning of the survey and throughout its execution, constant supervision and quality control strategies are implemented, aimed not only at monitoring the progress but also at detecting early and in real-time errors that occurred during the survey, behavioral problems among interviewers, among other aspects.

The following early warning strategies and corrective measures have been implemented during the survey process:

- Review of 100% of the collected surveys, in terms of the observations recorded by the interviewer, by the Site Coordinator. At this stage, it is verified that the person chosen in the sampling process was indeed interviewed, and the correct completion of the route sheet, and the time and duration of the interview are verified.

- Supervision of collected surveys by people other than the team of interviewers who conducted the survey. For this, a percentage of the sample (between 10 and 25% of the complete sample, depending on the wave) is randomly selected and re-contacted, and the responses to key questions are verified to detect and correct potential biases of the interviewer team, application errors, and possible serious faults such as survey falsification.

- Weekly feedback to interviewers by zone managers, based on the results of the survey review and supervision.

- Constant validation of the collected information by the central team to the database and validation sheets.

- Weekly report to the COES team informing about the progress of the survey.

### Follow-up Strategy {-}

An essential aspect for the continuous functioning of ELSOC is to achieve the follow-up over time of the respondents selected in the sample. To this end, loyalty and follow-up strategies are defined to reduce the attrition phenomenon.

Some of the implemented measures are:

- Obtaining, storing, and updating relevant information to ensure adequate contact: interviewee's name, contact information (phone number and email), and basic identification aspects. This information is stored and used following strict confidentiality standards.

- Pre-contact to schedule interviews and plan the fieldwork before the survey date. Each interviewer receives from the site coordinator the data on the appointments scheduled with ELSOC participants and uses a specific interview protocol for re-interviews.

- Formation of teams of interviewers with varied profiles, prioritizing those with experience in previous waves of ELSOC or other complex surveys. Interviewers and coordinators are trained in the specific aspects of the role and the technical aspects of the questionnaire and the study, with an emphasis on the interview protocol.

- Use of presentation letters for each interviewee, signed by the Director of the Centro de Microdatos, explaining the objectives of the study, the institutions in charge, the guarantee of data confidentiality, and the delivery of the incentive.

- Delivery of a monetary incentive to the respondents after obtaining the complete survey. The incentive corresponds to a Giftcard to be redeemed in supermarkets or similar businesses. The incentive was \$6,000 during the 2016, 2017, 2018, and 2019 waves. During the 2021 wave, the monetary incentive was increased to \$9,000.

- Re-contact in case of refusals or contactability problems by interviewers other than the original one, who must have a profile suitable for the observed characteristics of the unachieved sample and with more experience in applying similar surveys. These interviewers have an additional economic incentive to apply these types of surveys defined as "recovered."

- In cases where the interviewee has moved, interviewers are asked to find out about the new address and make efforts to interview them at the new address. This is done for changes of address within the same region or in another region. In the latter case, the case is referred to the coordinator in charge of the new municipality of residence of the interviewee.

- Christmas greetings and similar messages are sent to ELSOC participants by email on relevant dates. Additionally, brochures with the main results of previous rounds were delivered so that the interviewees could learn about the use of the collected data and its relevance to the country.


## Incidents in the application of the surveys

Below are the specific milestones associated with the implementation of the 2016, 2017, 2018, 2019, 2021, and 2022 waves:

### Implementation Wave 2016

The survey was conducted over a period of approximately 20 weeks, from August to December 2016 (see Figure \@ref(fig:graf-fechas-ola1)). For the fieldwork, 132 interviewers were distributed in 4 work sites, each led by a duly trained group coordinator.

The period was longer than initially predicted (it was estimated to last between 8 and 12 weeks, finally extending to 20). The main difficulties encountered and the measures taken to address the eventualities were:

- CMD, in its technical proposal, committed to an 8-week fieldwork period. This time estimate was based on recent studies but was not adequate given the difficulties in accessing the sample and its dispersion.

- The main problem occurred in the Metropolitan Region, which, unlike other regions, did not consider an oversampling based on historical response rates in household surveys with random selection of the interviewee. To address this problem, the sample size was increased (see [Stage 5: Increase in sample size](#etapa5) for more details), which resulted in additional survey time.

- There was difficulty in recruiting and retaining interviewers in the project due to the difficulty of accessing the sample and its dispersion, which made the proposed payment to interviewers, compared to other parallel projects (within and outside the Center), relatively less attractive. The payment made and the facilities provided to interviewers were gradually increased to address this problem.

The final closure of the fieldwork was agreed upon with COES once the entire oversampled sample was covered^[While the goal is to achieve the highest number of successful interviews, it is necessary to establish a cutoff point due to the impossibility of establishing contact or obtaining a response from the household/interviewee.]. The fieldwork was finally closed with 2,984 completed surveys.


```{r graf-fechas-ola1, fig.cap = 'Number of interviews per week, wave 2016'}

elsoc_long_2016_2023 %>%
  filter(ola == 1) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1)^[For more information on determining final case disposition codes and calculating outcome rates, see 
[AAPOR (2016). Standard Definitions. Final Dispositions of Case Codes and Outcome Rates for Surveys](http://www.aapor.org/AAPOR_Main/media/publications/Standard-Definitions20169theditionfinal.pdf)]


```{r tabla-tasas-ola1}

tasas_ola1 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2016) %>% 
  mutate(original_2016 = scales::percent(original_2016, .1))

tasas_ola1 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2016',
      align = c('l', 'c'),
      
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```

#### Data Correction for Anomalous Cases: Waves 2016 and 2017 {-#casos-falsificados}

In the context of the execution of the third wave of the ELSOC study (year 2018), the falsification of a limited number of cases throughout the study in the 2016 and 2017 waves was diagnosed.

During the supervision stage of interviewers' work in 2018, the third wave of ELSOC, the Centro de Microdatos (CMD) detected and reported that a set of cases included in the panel sample were false.

Due to the slow progress of ELSOC field goals in 2018 in Tarapacá and Valparaíso, new interviewers were sent, who detected these problems. Specifically, the surveys were systematically falsified: they were conducted with people not included in the sample, or the interviewers requested information from third parties.

This led to an exhaustive review process, in which 56 falsified cases were detected in the 2016 fieldwork and 47 in the 2017 fieldwork, concentrated in the regions of Tarapacá (11 cases in 2016 and 11 in 2017) and Valparaíso (45 cases in 2016 and 37 in 2017).

The CMD's field strategy focuses on experienced interviewers, assigning the same cases to interviewers over time, according to the recommendation of the specialized literature. The problem was concentrated in specific interviewers in those areas, which was not detected during the field supervision of the first two waves.

The falsified cases represent 1.9% of the effective sample size of ELSOC 2016 (N = 2,984) and 1.9% of 2017 (N = 2,522), so they are considered to have a marginal impact at the general level. Despite this, the decision was made to exclude the falsified cases from the databases, and a corrected version of the 2016 and 2017 databases was generated and made available. The weights were corrected considering the elimination of these cases.

To avoid these problems in the future, the supervision protocols were modified, increasing the in-person supervision and the percentage of cases supervised per interviewer. Additionally, a rotation system for interviewers was implemented so that the sample is not surveyed by the same interviewers in more than one round.


### Implementation Wave 2017

The final survey was conducted over a twelve-week period, from July to October 2017 (see Figure \@ref(fig:graf-fechas-ola2)). For the fieldwork, 120 interviewers were distributed in 17 work sites.

The fieldwork was carried out over a longer period than predicted, as it was estimated to last nine weeks, finally extending to twelve. However, the data collection period was shorter than that of the first wave, which extended for 20 weeks. This greater speed was facilitated by the availability of contact data for the interviewees obtained in the previous wave.

The extension of the fieldwork beyond the original estimate was mainly due to greater difficulty in contacting interviewees in the Metropolitan and Valparaíso regions.

The final closure of the fieldwork was carried out once the entire sample was covered. The fieldwork was finally closed with 2,521 completed surveys.


```{r graf-fechas-ola2, fig.cap = 'Number of interviews per week, wave 2017'}

elsoc_long_2016_2023 %>%
  filter(ola == 2) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```


#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola2}

tasas_ola2 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2017) %>% 
  mutate(original_2017 = scales::percent(original_2017, .1))

tasas_ola2 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2017',
      align = c('l', 'c'),
      
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```

#### Falsified Cases in Wave 2017

After the records and procedures applied by CMD in 2018, anomalies were found and corrected in surveys conducted in 2016 and 2017. For more details on the problem found and its correction, see [Data Correction for Falsified Cases: Waves 2016 and 2017](#casos-falsificados).


### Implementation Wave 2018

The fieldwork was conducted from August to December 2018, within the estimated time (approximately 15 weeks) (see Figure \@ref(fig:graf-fechas-ola3)). For the fieldwork, 189 interviewers were distributed in 18 work sites.

During this survey, the Refresh sample was included, which created a challenge for the interviewers, as they had to explain and motivate participation in the study to both the family group and the interviewees themselves.

On the other hand, the follow-up sample (Original sample) of the 2016-2017 interviewees had contactability difficulties due to a higher presence of recorded address changes than in previous versions of the survey. 6.9% had moved to a different address.

Another difficulty faced in this wave was related to the falsification cases detected (see [Data Correction for Falsified Cases: Waves 2016 and 2017](#casos-falsificados)). This problem involved an exhaustive field review of these cases and a strengthening of the control system, including the following:

1. Increasing the percentage of surveys to be controlled from 10% to 15% in 2018. Ensuring to control at least 20% of the work done by each interviewer.

2. Establishing for future waves of the project the rotation of interviewers over the same interviewee.

3. Registering the involved interviewers to ensure they are not considered in future applications of the study. Regarding the general dynamics of the work, economic incentives were created for interviewers to achieve the expected sample. Likewise, the necessary mobilization was provided for interviewers to cover the entire sample at different times.

The final closure of the fieldwork was agreed upon with COES once the entire sample was covered. The fieldwork was closed with 2,274 surveys in the follow-up sample and 1,523 surveys in the refresh sample.

```{r graf-fechas-ola3, fig.cap = 'Number of interviews per week, wave 2018'}

elsoc_long_2016_2023 %>%
  filter(ola == 3) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```



#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola3}

tasas_ola3 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2018, refresco_2018) %>% 
  mutate(original_2018 = scales::percent(original_2018, .1),
         refresco_2018 = scales::percent(refresco_2018, .1))

tasas_ola3 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2018',
      align = c('l', 'c', 'c'),
      
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample', 'Refresh Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```


### Implementation Wave 2019

The data collection for ELSOC 2019 was scheduled to begin on Saturday, October 19, 2019, but due to the Social Outbreak that occurred in Chile starting on October 18, 2019, the fieldwork had to be suspended until Thursday, November 21, when the data collection finally began. Therefore, the survey was conducted during the period of the Social Outbreak, which made its execution difficult.

This work extended over a period of 13 weeks (Due to the wear and tear of the sample and the field team, a pause in data collection was decided during the last 3 weeks of February 2020) (see Figure \@ref(fig:graf-fechas-ola4)). For the fieldwork, 143 interviewers were distributed in 16 work sites, managed by duly trained zone coordinators.


```{r graf-fechas-ola4, fig.cap = 'Number of interviews per week, wave 2019'}

elsoc_long_2016_2023 %>%
  filter(ola == 4) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))



```



#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola4}

tasas_ola4 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2019, refresco_2019) %>% 
  mutate(original_2019 = scales::percent(original_2019, .1),
         refresco_2019 = scales::percent(refresco_2019, .1))

tasas_ola4 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2019',
      align = c('l', 'c', 'c'),
      
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample', 'Refresh Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```

### Implementation Wave 2021

The health crisis caused by the COVID-19 pandemic and the associated restrictions required changing the methodology of the Chilean Social Longitudinal Survey from face-to-face to remote through a telephone survey (For more details, see [Questionnaire 2021: survey during the COVID-19 pandemic](#instrumento-covid)). This change in the data collection method presented a significant logistical and operational challenge, as ELSOC had been conducted face-to-face since its inception.

The COVID-19 pandemic also affected the traditional survey period of ELSOC, which was scheduled to begin in October 2020. However, the fifth wave survey began on Saturday, January 30, 2021, with the assignment of the sample to trained interviewers. The reasons for postponing the survey period were mainly due to waiting for more favorable health conditions and quarantines that would allow face-to-face data collection (however, it soon became clear that maintaining the face-to-face modality was impossible); and the additional time required for field preparation due to the change in data collection modality. The fieldwork extended until mid-June 2021. However, the application was mostly conducted between February and April 2021 (see Figure \@ref(fig:graf-fechas-ola5)).

Due to the wear and tear of the sample and the field team from unsuccessful contact attempts, it was decided in May to change the production methodology from unit sample to forming a group of interviewers dedicated exclusively to reviewing the sample during a determined workday.


```{r graf-fechas-ola5, fig.cap = 'Number of interviews per week, wave 2021'}

elsoc_long_2016_2023 %>%
  filter(ola == 5) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```


#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola5}

tasas_ola5 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2021, refresco_2021) %>% 
  mutate(original_2021 = scales::percent(original_2021, .1),
         refresco_2021 = scales::percent(refresco_2021, .1))

tasas_ola5 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2021',
      align = c('l', 'c', 'c'),
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample', 'Refresh Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```


### Implementation Wave 2022

The data collection process began on Friday, July 22, 2022, with the assignment of the sample to the trained and selected interviewers for the study, after completing the national recruitment and selection process. This work extended over a period of 19 weeks, ending on December 1, 2022 (see Figure \@ref(fig:graf-fechas-ola6)).

As a result, the 2022 Constitutional Exit Plebiscite occurred during the data collection process (held on Sunday, September 4), which required updating the questionnaire questions related to the plebiscite. In particular, the question about the plebiscite was modified, removing the one referring to the intention to vote and adding, instead, two new questions: the first refers to whether the person participated in the plebiscite vote, and the second to the retrospective vote in question.

```{r graf-fechas-ola6, fig.cap = 'Number of interviews per week, wave 2022'}

elsoc_long_2016_2023 %>%
  filter(ola == 6) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr),
         termino = max(fecha_entr),
         año_inicio = min(año),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```

#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola6}

tasas_ola6 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2022, refresco_2022) %>% 
  mutate(original_2022 = scales::percent(original_2022, .1),
         refresco_2022 = scales::percent(refresco_2022, .1))

tasas_ola6 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2022',
      align = c('l', 'c', 'c'),
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample', 'Refresh Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```

### Implementation Wave 2023

The data collection process began on Friday, July 22, 2022, with the assignment of the sample to the trained and selected interviewers for the study, after completing the national recruitment and selection process. This work extended over a period of 19 weeks, ending on December 1, 2022 (see Figure \@ref(fig:graf-fechas-ola6)).

As a result, the 2022 Constitutional Exit Plebiscite occurred during the data collection process (held on Sunday, September 4), which required updating the questionnaire questions related to the plebiscite. In particular, the question about the plebiscite was modified, removing the one referring to the intention to vote and adding, instead, two new questions: the first refers to whether the person participated in the plebiscite vote, and the second to the retrospective vote in question.

```{r graf-fechas-ola6, fig.cap = 'Number of interviews per week, wave 2022'}

elsoc_long_2016_2023 %>%
  filter(ola == 7) %>% 
  mutate(fecha_entr = lubridate::ymd(fecha_entr),
         dia = lubridate::yday(fecha_entr),
         año = lubridate::year(fecha_entr),
         inicio = min(fecha_entr,na.rm=T),
         termino = max(fecha_entr,na.rm=T),
         año_inicio = min(año,na.rm=T),
         dia_inicio = lubridate::yday(inicio),
         semana = trunc((365*(año - año_inicio) + dia - dia_inicio) / 7 )) %>% 
  group_by(semana, inicio, termino) %>% 
  summarise(n = n()) %>% 
  ungroup() %>% 
  mutate(fecha = inicio + 7 * semana) %>% 
  ggplot(aes(x = fecha, y = n, label = n)) + 
  theme_bw() +
  geom_col(position = 'dodge2') +
  geom_text(vjust = -0.5,
            position = position_dodge2(width = .9),
            size = 3) +
  geom_col(fill = viridis::viridis(1, begin = .33)) +
  scale_x_date(date_labels = "%d-%m-%y",
               date_breaks = '1 week') +
  scale_y_continuous(labels = scales::number,
                     limits = c(0, 1000)) +
  ylab(label = 'Number of weekly interviews') +
  xlab(label = NULL) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))


```

#### Survey Indicators {-}

Below are the Response Rate 1 (TRR1, defined by AAPOR), Cooperation Rate 1 (TCC1), Refusal Rate 1 (TR1), and Contact Rate 1 (TC1):


```{r tabla-tasas-ola6}

tasas_ola7 <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  select(ola, original_2023, refresco_2023) %>% 
  mutate(original_2023 = scales::percent(original_2023, .1),
         refresco_2023 = scales::percent(refresco_2023, .1))

tasas_ola7 %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, wave 2022',
      align = c('l', 'c', 'c'),
      booktabs = TRUE,
      col.name = c('Indicator', 'Original Sample', 'Refresh Sample')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2()

```

## Survey Indicators

Below are the contact, cooperation, refusal, and response rates for all samples and waves.

```{r tabla-de-tasas-varias-olas}
tasas_olas <- readxl::read_xlsx(path = file.path('inputs', 'datos_manual.xlsx'),
                                sheet = 'tasa_respuesta') %>% 
  rename(variable = ola) %>% 
  pivot_longer(cols = starts_with(c('original_', 'refresco_')),
               names_to = c('muestra', 'ola'),
               names_sep = '_') %>% 
  mutate(value = scales::percent(value, accuracy = .1)) %>% 
  pivot_wider(names_from = variable,
              values_from = value) %>% 
  janitor::clean_names() %>% 
  arrange(muestra, ola) %>% 
  select(ola, muestra, tasa_de_respuesta, tasa_de_cooperacion, tasa_de_rechazo, tasa_de_contacto)

tasas_olas %>%
  select(-muestra) %>% 
  kbl(caption = 'Response, Cooperation, Refusal, and Contact Rates, by wave and sample',
      align = c('c', 'c', 'c', 'c', 'c'),
      col.name = c('Wave', 'Response Rate', 'Cooperation Rate', 'Refusal Rate', 'Contact Rate'),
      booktabs = TRUE) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>% 
  pack_rows('Original Sample', 1, 6) %>%
  pack_rows('Refresh Sample', 7, 10)


```


## Survey Attrition {#atricion}

Below is the attrition obtained by Sample:

```{r tabla-atricion}
atricion <-  elsoc_long_2016_2023 %>% 
  sjlabelled::as_label(ola, muestra) %>% 
  group_by(ola, muestra) %>% 
  summarise(n = n()) %>% 
  pivot_wider(names_from = muestra, values_from = n) %>% 
  janitor::clean_names() %>% 
  ungroup() %>% 
  mutate(atricion_original = scales::percent(1 - muestra_original/lag(muestra_original), .1),
         atricion_refresco = scales::percent(1 - muestra_refresco/lag(muestra_refresco), .1))
  
atricion %>% 
  kbl(align = c('c', 'c', 'c', 'c', 'c'),
      booktabs = TRUE,
      col.name = c('Measurement', rep(c('Original Sample', 'Refresh Sample'), 2)),
      caption = 'Attrition of ELSOC samples between waves') %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>% 
  add_header_above(c(" " = 1, "Achieved Sample" = 2, "Attrition Rate" = 2))

```

- By gender:

```{r tabla-atricion-sexo}

atricion_sexo <-elsoc_long_2016_2023 %>%
  left_join(elsoc_long_2016_2023  %>% filter(ola == 1 & muestra == 1 | ola == 3 & muestra == 2) %>% 
              select(idencuesta, m0_sexo) %>% 
              rename(m0_sexo0 = m0_sexo), by = 'idencuesta') %>% 
  sjlabelled::as_label(ola, muestra, m0_sexo0) %>% 
  group_by(ola, muestra, m0_sexo0) %>% 
  summarise(n = n()) %>% 
  group_by(muestra, m0_sexo0) %>% 
  mutate(atricion = 1 - n/lag(n),
         atricion = scales::percent(atricion, .1)) %>% 
  filter(!is.na(m0_sexo0)) %>% 
  pivot_wider(id_cols = c(ola, muestra), 
              names_from = m0_sexo0, values_from = c(n, atricion)) %>%  
  janitor::clean_names() %>% 
  ungroup() %>% 
  arrange(muestra, ola) %>% 
  select(-muestra)

atricion_sexo %>% 
  kbl(align = rep('c', 5),
      
      booktabs = TRUE,
      col.name = c('Measurement', 'Men', 'Women', 'Men', 'Women'),
      caption = 'Attrition of ELSOC samples between waves, by gender') %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>% 
  pack_rows('Original Sample', 1, 6) %>%
  pack_rows('Refresh Sample', 7, 10) %>% 
  add_header_above(c(" " = 1, "Achieved Sample" = 2, "Attrition Rate" = 2))


```


- By age group:

```{r tabla-atricion-edad}

atricion_edad <- elsoc_long_2016_2023 %>%
  left_join(elsoc_long_2016_2023 %>% filter((ola == 1 & muestra == 1) | (ola == 3 & muestra == 2)) %>% 
              select(idencuesta, m0_edad) %>% 
              rename(m0_edad0 = m0_edad), by = 'idencuesta') %>% 
    mutate(edadt = factor(car::recode(m0_edad0, "18:29 = 1; 30:49 = 2; 50:64 = 3; 65:150 = 4"),
                    levels = 1:4,
                    labels = c('18-29', '30-49', '50-64', '65 or older'))) %>% 
  sjlabelled::as_label(ola, muestra, edadt) %>% 
  group_by(ola, muestra, edadt) %>% 
  summarise(n = n()) %>% 
  group_by(muestra, edadt) %>% 
  mutate(atricion = 1 - n/lag(n),
         atricion = scales::percent(atricion, .1)) %>% 
  filter(!is.na(edadt)) %>% 
  pivot_wider(names_from = edadt, values_from = c(n, atricion)) %>% 
  janitor::clean_names() %>% 
  ungroup() %>% 
  arrange(muestra, ola) %>% 
  select(-muestra)

atricion_edad %>% 
  kbl(align = rep('c', 9),
      
      booktabs = TRUE,
      col.name = c('Measurement', rep(c('18-29', '30-49', '50-64', '65 or older'), 2)),
      caption = 'Attrition of ELSOC samples between waves, by age group') %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>% 
  pack_rows('Original Sample', 1, 6) %>%
  pack_rows('Refresh Sample', 7, 10) %>% 
  add_header_above(c(" " = 1, "Achieved Sample" = 4, "Attrition Rate" = 4))


```


- By educational level:

```{r tabla-atricion-educ}

atricion_educ <- elsoc_long_2016_2023 %>%
  left_join(elsoc_long_2016_2023 %>% filter(ola == 1 & muestra == 1 | ola == 3 & muestra == 2) %>% 
              select(idencuesta, m01) %>% 
              rename(m010 = m01), by = 'idencuesta') %>%
  mutate(educ = factor(car::recode(m010, "1:3 = 1; 4:5 = 2; 6:7 = 3; 8:10 = 4; -999:-666 = 5"),
                       levels = 1:5,
                       labels = c("Basic", "Secondary", "Technical", "University", "NS/NR"))) %>% 
  sjlabelled::as_label(ola, muestra, educ) %>% 
  group_by(ola, muestra, educ) %>% 
  summarise(n = n()) %>% 
  filter(!educ == 'NS/NR') %>% 
  group_by(muestra, educ) %>% 
  mutate(atricion = 1 - n/lag(n),
         atricion = scales::percent(atricion, .1)) %>% 
  filter(!is.na(educ)) %>% 
  pivot_wider(names_from = educ, values_from = c(n, atricion)) %>% 
  janitor::clean_names() %>% 
  ungroup() %>% 
  arrange(muestra, ola) %>% 
  select(-muestra)

atricion_educ %>% 
  kbl(align = rep('c', 9),
      
      booktabs = TRUE,
      col.name = c('Measurement', rep(c('Basic', 'Secondary', 'Technical', 'University'), 2)),
      caption = 'Attrition of ELSOC samples between waves, by educational level') %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>% 
  pack_rows('Original Sample', 1, 6) %>%
  pack_rows('Refresh Sample', 7, 10) %>% 
  add_header_above(c(" " = 1, "Achieved Sample" = 4, "Attrition Rate" = 4))

```

### Attrition Compared to Other Surveys

Below is the sample achieved by longitudinal surveys for social research similar to ELSOC, conducted in other parts of the world. For the case of The UK Household Longitudinal Study, of Understanding Society, the following samples achieved and attrition rates by measurement are found:

```{r atricion-usocietya}

usociety <- readxl::read_xlsx(file.path('inputs', 'atriciones_encuestas.xlsx')) %>%
  janitor::clean_names() %>% 
  mutate(agps = scales::percent(as.double(agps), .1),
         abhps = scales::percent(as.double(abhps), .1),
         aiembs = scales::percent(as.double(aiembs), .1),
         aembs = scales::percent(as.double(aembs), .1))
         

usociety %>%
    kbl(align = c('l', 'c', 'c', 'c', 'c','c','c','c','c','c'),
      booktabs = TRUE,
      col.name = c('Measurement', rep(c('General \n Population \n Sample', 'British \n Household \n Panel \n Survey', 'Immigrant and \n Ethnic Minority \n Boost Sample', 'Ethnic Minority Boost Sample'), 2)),
) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>%
  add_header_above(c(" " = 1, "Achieved Sample" = 4, "Attrition Rate" = 4))

```

For the case of The New Zealand Attitudes and Values Study (NZAVS), the following sample achieved and attrition by measurement are found:

```{r atricion-usocietyb}

nzav <- readxl::read_xlsx(file.path('inputs', 'atriciones_encuestas.xlsx'),
                                   sheet = 'NZ AV') %>% 
  janitor::clean_names() %>% 
  mutate(ar1 = scales::percent(as.double(ar1), .1),
         ar2 = scales::percent(as.double(ar2), .1))

nzav %>%
    kbl(align = c('l', 'c', 'c', 'c', 'c','c','c','c'),
      booktabs = TRUE,
      col.name = c('Measurement','Prov. of 1st Measurement','Prov. of Previous Measurement','Total Accumulated Sample','Relative to 1st Measurement','Relative to Previous Measurement')) %>% 
  kable_styling(full_width = FALSE,
                latex_options = 'HOLD_position') %>% 
  kable_classic_2() %>%
  add_header_above(c(" " = 1, "Achieved Sample" = 2, "Attrition Rate" = 3))

```


\newpage

